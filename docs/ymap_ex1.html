<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ルート地図</title>
<style>
html {
  height: 100%;
}
body {
  margin: 0;
  height: 100%;
}
#map {
  width: 100%;
  height: 100%;
/*
  position: absolute;
  top: 0;
  bottom: 0;
*/
}
</style>
</head>
<body>
<div id="map"></div>
<script src="https://map.yahooapis.jp/js/V1/jsapi?appid=dj00aiZpPWR0cjBWa012YVBQNiZzPWNvbnN1bWVyc2VjcmV0Jng9ZDU-"></script>
<script>
const my_param = { // NOTE: identifier 'param' collides with global definition in the yahoo library
  lon: 138.723460, lat: 35.931374, zoom: 14,
  url: 'https://anineco.github.io/gpx2geojson/example/routemap.min.kml' // absolute URL
};
location.search.slice(1).split('&').forEach(function (ma) {
  const s = ma.split('=');
  if (s[0] === 'url') {
    my_param[s[0]] = decodeURIComponent(s[1]);
  } else if (s[0] in my_param) {
    my_param[s[0]] = Number(s[1]);
  }
});

window.addEventListener('DOMContentLoaded', function () {
  const map = new Y.Map('map');
  map.setConfigure('scrollWheelZoom', true);
  map.setConfigure('enableOpenStreetMap', true);
  map.removeLayerSet(Y.LayerSetId.B1); // 地下街
  const topographicLayerSet = new Y.LayerSet('地形図', [new Y.StyleMapLayer('topographic')]);
  map.addLayerSet('MyTopographicLayerSet', topographicLayerSet);
  map.addControl(new Y.LayerSetControl());
  map.addControl(new Y.ZoomControl());
//  map.addControl(new Y.SliderZoomControlVertical());
  map.addControl(new Y.ScaleControl());
  map.drawMap(new Y.LatLng(my_param.lat, my_param.lon), my_param.zoom, 'MyTopographicLayerSet');
  const track = new Y.GeoXmlLayer(my_param.url);
  map.addLayer(track);
  track.execute();
});
</script>
</body>
</html>
