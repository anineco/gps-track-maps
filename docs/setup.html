<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ルート地図の設置方法（共通）</title>
<link rel="stylesheet" href="common.css">
</head>
<body>
<div class="menu">
<ul>
<li><a href="https://anineco.nyanta.jp/">電脳覚書</a> |</li>
<li><a href="https://anineco.nyanta.jp/bbs/">掲示板</a> &gt;</li>
<li><a href="https://github.com/anineco/">GitHub</a> |</li>
<li><a href=".">TOP</a> &gt;</li>
<li><a href="../gpx2geojson/">GPX2GeoJSON</a> |</li>
<li>設置方法（共通） |</li>
<li><a href="omap.html">OpenLayers</a> |</li>
<li><a href="lmap.html">Leaflet</a> |</li>
<li><a href="gmap.html">Google</a> |</li>
<li><a href="bmap.html">Bing</a></li>
</ul>
</div><!-- end menu -->
<h1>ルート地図の設置方法（共通）</h1>
<h2>ソースコードの入手方法</h2>
<div class="src">
<div>入手方法</div>
<pre>
git clone https://github.com/anineco/gps-track-maps.git
</pre>
</div><!-- .src -->
<div class="src">
<div>ディレクトリ構成</div>
<pre>
gps-track-maps/
├── docs/
│   ├── <b>lmap_ex2.html</b> （Leaflet + GeoJSON）
│   ├── <b>gmap_ex2.html</b> （Googleマップ + GeoJSON）
│   ├── <b>bmap_ex2.html</b> （Bing Maps + GeoJSON）
│   ├── lmap_ex1.html （Leaflet + KML）
│   ├── gmap_ex1.html （Googleマップ + KML）
│   ├── bmap_ex1.html （Bing Maps + KML）
│   ├── ymap_ex1.html （Yahoo!地図 + KML）
│   └── example/
│       ├── routemap.min.kml （KMLファイル）
│       └── routemap.geojson （GeoJSONファイル）
├── package-lock.json
├── package.json
└── src/
    ├── <b>omap_ex2.html</b> （OpenLayers + GeoJSON）
    ├── omap_ex2.js
    ├── omap_ex1.html （OpenLayers + KML）
    ├── omap_ex1.js
    ├── Popup.*
    └── Toolbar.*
</pre>
</div><!-- .src -->
<h2>ページ内埋め込み</h2>
<div class="src">
<div>ディレクトリ構成図</div>
<pre>
.
├── your_page.html（対象ページ）
├── <b>Xmap_ex2.html</b>（X=b,g,l,o）
└── example
    └── <b>routemap.geojson</b>
</pre>
</div><!-- .src -->
<div class="src">
<div>対象ページに挿入するコード</div>
<pre>
&lt;iframe width=&quot;640&quot; height=&quot;480&quot; style=&quot;border:none;&quot;
  src=&quot;<b>Xmap_ex2.html</b>?lat=35.913163&amp;lon=138.721400&amp;zoom=15&amp;url=<b>example/routemap.geojson</b>&quot;&gt;
&lt;/iframe&gt;
</pre>
</div><!-- .src -->
<table class="base">
<tbody>
<tr><th>パラメータ名</th><th>設定値の例</th><th>説明</th></tr>
<tr><td>lat</td><td>35.913163</td><td>緯度（単位：度）</td></tr>
<tr><td>lon</td><td>138.721400</td><td>経度（単位：度）</td></tr>
<tr><td>zoom</td><td>15</td><td>ズームレベル</td></tr>
<tr><td>url</td><td>example/routemap.geojson</td><td>GeoJSONファイル</td></tr>
</tbody>
</table>
<ul style="list-style-type:none;">
<li>※1：KMLファイルを上乗せ表示する場合は、<code>Xmap_ex<b>1</b>.html</code>（X=b,g,l,o,y）を用います。<br>
使い方は、<code>url</code>がKMLファイルを指定する他は、<code>Xmap_ex2.html</code>。と同様です。</li>
<li>※2：<code>gmap_ex1.html</code>と<code>ymap_ex1.html</code>では、KMLファイルは<b>絶対URL</b>で指定します。</li>
<li>※3：<code>ymap_ex1.html</code>では、<code>zoom+1</code>が実際に表示されるズームレベルとなります。</li>
</ul>
<h2>別窓ポップアップ</h2>
<div class="src">
<div>JavaScriptを追加</div>
<pre>
function routemap(url) {
  window.open(url, 'ROUTEMAP', 'width=640,height=510,resizable=yes');
  return false;
}
</pre>
</div><!-- .src -->
<div class="src">
<div>HTMLを追加</div>
<pre>
&lt;a href=&quot;<b>Xmap_ex2.html</b>?lat=35.913163&amp;lon=138.721400&amp;zoom=15&amp;url=<b>example/routemap.geojson</b>&quot;
  onclick=&quot;return routemap(this.href)&quot;&gt;ルート地図&lt;/a&gt;
</pre>
</div><!-- .src -->
<h2>付録：ルート地図（Yahoo!地図版）の設置</h2>
<div class="src">
<div>ymap_ex1.html（<a href="ymap_ex1.html" download>ダウンロード</a>）</div>
<pre class="prettyprint linenums" data-url="ymap_ex1.html"></pre>
</div><!-- .src -->
<div class="src">
<div>ymap_ex1.html の変更個所（28行目）</div>
<pre>
&lt;script src=&quot;https://map.yahooapis.jp/js/V1/jsapi?appid=<b>[YOUR API KEY]</b>&quot;&gt;&lt;/script&gt;
</pre>
</div><!-- .src -->
<address>&copy; 2019 <a href="http://anineco.nyanta.jp/">あにねこ電脳覚書</a></address>
<script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/3.3.1/es6-promise.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.4/fetch.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?autorun=false"></script>
<script src="url-load-prettify.js"></script>
</body>
</html>
