<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Embed source code from GitHub</title>
<link rel="stylesheet" href="src/common.css">
<style>
.prettify li { color: purple; }
.prettify li:nth-child(odd) { background: #eee; }
.prettify li:nth-child(even) { background: #ddd; }
.prettify code {
  font-family: Consolas, Menlo, monospace;
  color: black;
}
</style>
</head>
<body>
<pre class="prettify"><script type="text/plain">package iconlut;
use strict;
use warnings;
sub iconUrl {
  my $icon = shift; # kashmir3d:icon
  return "https://map.jpn.org/icon/$icon.png";
}
sub iconSize {
  my $icon = shift; # kashmir3d:icon
  return [24, 24];
}
sub iconAnchor {
  my $icon = shift; # kashmir3d:icon
  return [12, 12];
}
1;</script></pre>
<hr>
<pre class="prettify" data-url="https://raw.githubusercontent.com/anineco/gpx2geojson/master/iconlut.pm"></pre>
<script>
window.addEventListener('DOMContentLoaded', function () {
  Array.prototype.map.call(document.querySelectorAll('.prettify'), function (element) {
    const url = element.getAttribute('data-url');
    if (!url) {
      element.insertAdjacentHTML('afterbegin', '<ol><li><code>'
        + element.textContent.split(/\n/).join('</code></li><li><code>')
        + '</code></li></ol>'
      );
      return;
    }
    const xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.responseType = 'text';
    xhr.addEventListener('loadend', function (event) {
      if (this.status !== 200) { return; }
      element.insertAdjacentHTML('afterbegin', '<ol><li><code>'
        + this.response.trim().split(/\n/).join('</code></li><li><code>')
        + '</code></li></ol>'
      );
    });
    xhr.send();
  });
});
</script>
</body>
</html>
